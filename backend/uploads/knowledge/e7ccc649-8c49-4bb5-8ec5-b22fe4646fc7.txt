#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
æ™ºç³–å°åŠ©æ‰‹ä¿®å¤éªŒè¯è„šæœ¬
æµ‹è¯•å…³é”®ç»„ä»¶æ˜¯å¦èƒ½æ­£å¸¸å¯¼å…¥å’Œè¿è¡Œ
"""

import sys
import os

def test_imports():
    """æµ‹è¯•å…³é”®æ¨¡å—å¯¼å…¥"""
    print("ğŸ” å¼€å§‹éªŒè¯æ™ºç³–å°åŠ©æ‰‹ä¿®å¤...")

    # ç¡®ä¿åœ¨mainç›®å½•ä¸‹è¿è¡Œï¼Œå¹¶æ·»åŠ è·¯å¾„
    import os
    import sys

    current_dir = os.path.dirname(os.path.abspath(__file__))
    parent_dir = os.path.dirname(current_dir)

    if parent_dir not in sys.path:
        sys.path.insert(0, parent_dir)
    if current_dir not in sys.path:
        sys.path.insert(0, current_dir)

    tests = [
        ("PyYAML", "import yaml; yaml.safe_load('test: value')"),
        ("Flask", "import flask"),
        ("TTSæœåŠ¡", "from services.tts_service import TTSService"),
        ("åº”ç”¨å¯¼å…¥", "from app import app"),
        ("è·¯ç”±ç³»ç»Ÿ", "from routes import register_blueprints"),
        ("CozeæœåŠ¡", "from services.coze_service import CozeService"),
    ]

    passed = 0
    failed = 0

    for test_name, test_code in tests:
        try:
            exec(test_code)
            print(f"âœ… {test_name}: é€šè¿‡")
            passed += 1
        except Exception as e:
            print(f"âŒ {test_name}: å¤±è´¥ - {str(e)}")
            failed += 1

    print(f"\nğŸ“Š æµ‹è¯•ç»“æœ: {passed} é€šè¿‡, {failed} å¤±è´¥")

    if failed == 0:
        print("ğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼åº”ç”¨å¯ä»¥æ­£å¸¸å¯åŠ¨ã€‚")
        return True
    else:
        print("âš ï¸ éƒ¨åˆ†æµ‹è¯•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç›¸å…³é…ç½®ã€‚")
        return False

if __name__ == "__main__":
    success = test_imports()
    sys.exit(0 if success else 1)
