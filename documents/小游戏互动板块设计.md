# 小游戏互动板块设计方案（儿童友好 & 糖尿病相关）

## 1. 目标与价值
- 让 6-12 岁儿童在轻松场景中学习血糖管理与饮食常识，提升参与度。
- 通过可视化反馈与积分激励，形成“玩-学-做”闭环，支持家长/医生指导。
- 风格对齐现有移动端：卡片式入口、柔和渐变、简洁动画。

## 2. 用户画像与场景
- 用户：初/中小学生糖尿病患儿及其同龄伙伴；监护人陪玩。
- 场景：碎片时间 3-5 分钟；课后或餐后；诊室等候时。
- 设备：移动端优先，竖屏；弱网场景需快速加载、低包体。

## 3. 设计原则
- 趣味优先：低门槛上手，单局 ≤3 分钟。
- 轻知识：每局输出 1-2 条与血糖/饮食相关的小提示。
- 安全友好：无暴力元素，色彩柔和；默认静音，保留音效开关。
- 可成长：积分/徽章驱动，解锁新难度或皮肤。
- 低耦合：前端纯前端逻辑 + 配置驱动；核心战绩/奖励落库。

## 4. 功能概览
| 游戏 | 核心玩法 | 糖尿病关联 | 时长 | 产出 |
| --- | --- | --- | --- | --- |
| 1) 糖值守护跑酷 | 侧滚动收集健康食物，避开高糖食品和“低血糖陷阱”。 | 强化“低糖选择”、及时补食概念。 | 2-3 分钟 | 得分、健康食物数、提示卡 |
| 2) 食物拼拼乐 | 拖拽/配对食物与碳水区间，连线组合一份均衡餐盘。 | 认识常见食物碳水量、餐盘结构。 | 3 分钟 | 得分、正确率、学习提示 |


- 公共特性：离线可玩（本地资源 + 远端配置）、新手引导、局内暂停/重开、结束页解读与提示。
- 激励：与现有积分体系打通（完成局/达成目标可获得积分），徽章如“健康餐盘大师”“血糖守护者”。

## 5. 信息架构与入口
- 入口：个人中心/学习成长页的「小游戏」卡片（示例截图风格）；列表页展示游戏封面、适龄提示、预计时长。
- 子页面：游戏详情（规则/奖励预览）→ 开始游戏 → 结算页（成绩 + 健康提示 + 积分领取）。
- 家长模式：可查看最近 7 天游戏记录与知识要点；可关闭聊天或弱联网模式。

## 6. 核心流程
1) 打开小游戏列表 → 选择游戏 → 拉取配置（难度、题库、奖励规则）。  
2) 进入游戏 → 局内事件（按帧或按节奏） → 实时得分/血糖条反馈。  
3) 结束页：成绩统计、健康提示（1-2 条）、可选积分领取。  
4) 数据上报：成绩、时长、正确率、奖励；异常终止也需上报（用于防作弊和调优）。

## 7. 关键设计要素
- 可配置内容：题库、关卡速度、食物与事件权重、奖励曲线；由后端下发 JSON。
- 适龄化：大号按钮、色彩对比可调；文字 ≤ 12 字/条；语音播报可选。
- 无障碍：色弱模式（高对比/纹理化），触控热区 ≥ 48px。
- 反沉迷：单日同一游戏推荐不超过 10 局，超限提示休息。

## 8. 数据与埋点
- 基础：game_id、session_id、start/end_time、duration、score、accuracy、events_log（压缩）、network_type。
- 反作弊：局时长阈值、超速点击检测、重复上报去重。
- A/B：可通过配置下发分组，调整事件权重/奖励倍率。

## 9. 技术与前端实现要点
- 框架：延续移动端栈（Vue + uni-app）；小游戏运行在独立子路由，复用全局状态（用户、积分）。
- 资源：SVG/PNG 轻量贴图，音效可选加载；弱网降级为简化动画。
- 逻辑：核心循环在前端；仅在开始时取配置、结束时上报成绩/领奖，降低实时依赖。
- 存储：本地缓存最近一版配置，断网可用；成绩上报失败进入重试队列。

## 10. 风险与对策
- 弱网/断网：使用本地默认配置启动；上报失败重试。
- 设备性能：提供“低性能模式”开关，降低粒子/帧率。
- 题库适配：题干过难 → 后端配置难度标签，前端按年龄段过滤。
- 内容审查：题库与提示由医务审核后发布。

## 11. 里程碑（建议）
- M1（1 周）：确定视觉/动效基线，完成游戏列表 + 轻问答 MVP。
- M2（2-3 周）：完成跑酷、拼拼乐核心循环；接通配置与上报。
- M3（4 周）：接入积分与徽章，完善家长模式、A/B 分组、反作弊。

## 12. 需后端配合（概要）
- 配置：按 game_id 下发游戏配置、题库、资源版本号。
- 成绩上报：接收成绩、事件、反作弊字段；返回奖励。
- 奖励：与积分体系对接，支持按成绩分段发放。
- 排行/记录：提供周榜/日榜与个人历史。



